<div class="bg-surface py-20">
  <div class="container-xl">
    <!-- Header -->
    <div class="text-center mb-16">
      <div class="badge-free mb-4">All Plans Include FREE Marketing Suite</div>
      <h1 class="text-4xl md:text-5xl font-black text-text-primary mb-6">
        Choose Your Hosting Plan
      </h1>
      <p class="text-xl text-text-secondary mb-4 max-w-3xl mx-auto">
        Every plan includes our complete FREE marketing suite worth £156/month.
        Save hundreds compared to competitors who charge extra for these essential tools.
      </p>
      <div class="savings-highlight">
        Save £67-£156 Per Month vs Competitors!
      </div>
    </div>

    <!-- Pricing Cards -->
    <div class="grid md:grid-cols-<%= @hosting_plans.count %> gap-8 max-w-6xl mx-auto">
      <% @hosting_plans.each do |plan| %>
        <div class="hosting-plan-card <%= 'featured' if plan.featured? %>">
          <% if plan.featured? %>
            <div class="badge-premium absolute -top-4 left-1/2 transform -translate-x-1/2">
              Most Popular
            </div>
          <% end %>
          
          <!-- Plan Header -->
          <div class="text-center mb-6">
            <h2 class="text-2xl font-bold text-text-primary mb-2"><%= plan.name %></h2>
            <p class="text-text-secondary mb-4"><%= plan.description %></p>
            
            <!-- Pricing Display -->
            <div class="price-display justify-center mb-4">
              <span class="price-currency">£</span>
              <span class="price-amount"><%= sprintf("%.2f", plan.price_monthly) %></span>
              <span class="price-period">/month</span>
            </div>
            
            <div class="badge-free mb-4">+ FREE £<%= plan.monthly_savings %>/month Marketing Suite</div>
            
            <!-- Total Savings -->
            <div class="text-sm text-text-muted">
              Annual Savings: <span class="text-free font-bold">£<%= plan.annual_savings %></span>
            </div>
          </div>

          <!-- Features List -->
          <div class="feature-list mb-8">
            <!-- Core Hosting Features -->
            <div class="feature-item">
              <span class="feature-check text-xs">✓</span>
              <span><%= plan.websites_display %> Website<%= 's' unless plan.websites_limit == 1 %></span>
            </div>
            
            <div class="feature-item">
              <span class="feature-check text-xs">✓</span>
              <span><%= plan.storage_display %> SSD Storage</span>
            </div>
            
            <div class="feature-item">
              <span class="feature-check text-xs">✓</span>
              <span><%= plan.bandwidth_display %> Bandwidth</span>
            </div>
            
            <!-- FREE Marketing Tools -->
            <hr class="my-4 border-border">
            <div class="text-sm font-bold text-free mb-2">FREE Marketing Tools:</div>
            
            <% if plan.email_marketing? %>
              <div class="feature-item">
                <span class="feature-check text-xs">✓</span>
                <span><strong>Email Marketing Suite</strong> (£29/month value)</span>
              </div>
            <% end %>
            
            <% if plan.seo_tools? %>
              <div class="feature-item">
                <span class="feature-check text-xs">✓</span>
                <span><strong>SEO & Analytics Tools</strong> (£19/month value)</span>
              </div>
            <% end %>
            
            <% if plan.social_scheduler? %>
              <div class="feature-item">
                <span class="feature-check text-xs">✓</span>
                <span><strong>Social Media Scheduler</strong> (£19/month value)</span>
              </div>
            <% end %>
            
            <% if plan.migration_support? %>
              <div class="feature-item">
                <span class="feature-check text-xs">✓</span>
                <span><strong>FREE Website Migration</strong></span>
              </div>
            <% end %>
          </div>

          <!-- CTA Buttons -->
          <div class="space-y-3">
            <%= form_with url: orders_path, method: :post, class: "w-full" do |form| %>
              <%= form.hidden_field :hosting_plan_id, value: plan.id %>
              <%= form.hidden_field :customer_name, value: "" %>
              <%= form.hidden_field :customer_email, value: "" %>
              <%= form.hidden_field :product_name, value: "#{plan.name} Hosting Plan" %>
              <%= form.hidden_field :amount, value: plan.price_monthly %>
              <%= form.hidden_field :currency, value: "gbp" %>
              <%= form.submit "Buy Now - £#{sprintf('%.2f', plan.price_monthly)}/month", class: "btn btn-primary w-full", onclick: "return collectCustomerInfo(this.form)" %>
            <% end %>
            
            <%= link_to hosting_plan_path(plan), class: "btn btn-secondary-outline w-full" do %>
              Learn More
            <% end %>
          </div>
          
          <!-- Additional Info -->
          <div class="text-center mt-4">
            <p class="text-xs text-text-muted">
              30-day money-back guarantee
            </p>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Value Comparison -->
    <div class="mt-16 bg-surface-elevated rounded-xl p-8">
      <h3 class="text-2xl font-bold text-text-primary text-center mb-8">
        What You Get vs What Others Charge Extra For
      </h3>
      
      <div class="overflow-x-auto">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Feature</th>
              <th class="us-column">Our Plans</th>
              <th class="competitor-column">Typical Competitors</th>
              <th class="us-column">Your Monthly Savings</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="font-semibold">Web Hosting</td>
              <td class="us-column">From £4.99/month</td>
              <td class="competitor-column">From £4.99/month</td>
              <td class="us-column">£0</td>
            </tr>
            <tr>
              <td class="font-semibold">Email Marketing Suite</td>
              <td class="us-column"><span class="badge-free text-xs">FREE</span></td>
              <td class="competitor-column">£29/month</td>
              <td class="us-column text-free font-bold">+£29</td>
            </tr>
            <tr>
              <td class="font-semibold">SEO & Analytics Tools</td>
              <td class="us-column"><span class="badge-free text-xs">FREE</span></td>
              <td class="competitor-column">£19/month</td>
              <td class="us-column text-free font-bold">+£19</td>
            </tr>
            <tr>
              <td class="font-semibold">Social Media Tools</td>
              <td class="us-column"><span class="badge-free text-xs">FREE</span></td>
              <td class="competitor-column">£19/month</td>
              <td class="us-column text-free font-bold">+£19</td>
            </tr>
            <tr>
              <td class="font-semibold">Website Migration</td>
              <td class="us-column"><span class="badge-free text-xs">FREE</span></td>
              <td class="competitor-column">£99 one-time</td>
              <td class="us-column text-free font-bold">Included</td>
            </tr>
            <tr class="border-t-4 border-primary font-bold text-lg">
              <td>Total Monthly Value</td>
              <td class="us-column text-2xl">£4.99 - £19.99</td>
              <td class="competitor-column text-2xl">£71.99 - £86.99</td>
              <td class="us-column text-2xl text-free">£67 saved</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="mt-16 text-center">
      <h3 class="text-2xl font-bold text-text-primary mb-8">
        Frequently Asked Questions
      </h3>
      
      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto text-left">
        <div class="bg-surface-elevated rounded-lg p-6">
          <h4 class="font-bold text-text-primary mb-2">Are the marketing tools really FREE?</h4>
          <p class="text-text-secondary">Yes! Every hosting plan includes our complete marketing suite at no extra cost. Other companies charge £67+ monthly for these same tools.</p>
        </div>
        
        <div class="bg-surface-elevated rounded-lg p-6">
          <h4 class="font-bold text-text-primary mb-2">Can I upgrade or downgrade anytime?</h4>
          <p class="text-text-secondary">Absolutely! You can change your plan anytime. Upgrades are instant, and downgrades take effect at your next billing cycle.</p>
        </div>
        
        <div class="bg-surface-elevated rounded-lg p-6">
          <h4 class="font-bold text-text-primary mb-2">Is migration really free?</h4>
          <p class="text-text-secondary">Yes! We'll migrate your website from any host for free. Our experts handle everything with zero downtime guaranteed.</p>
        </div>
        
        <div class="bg-surface-elevated rounded-lg p-6">
          <h4 class="font-bold text-text-primary mb-2">What if I'm not satisfied?</h4>
          <p class="text-text-secondary">We offer a 30-day money-back guarantee. If you're not completely satisfied, we'll refund your money, no questions asked.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function collectCustomerInfo(form) {
  // Get customer information through simple prompts
  const customerName = prompt('Please enter your full name:');
  if (!customerName || customerName.trim().length < 2) {
    alert('Please enter a valid name.');
    return false;
  }
  
  const customerEmail = prompt('Please enter your email address:', '');
  if (!customerEmail || !customerEmail.includes('@')) {
    alert('Please enter a valid email address.');
    return false;
  }
  
  // Update form fields
  form.querySelector('input[name="customer_name"]').value = customerName.trim();
  form.querySelector('input[name="customer_email"]').value = customerEmail.trim();
  
  return true;
}
</script>